### Login
POST localhost:8081/auth/login
Content-Type: application/json

{
  "username": "{{username}}",
  "password": "{{password}}"
}

### Logout
#GET localhost:8081/auth/logout

### Create wallet
POST localhost:8081/api/wallets
Content-Type: application/json

{
  "name": "test-name-2"
}

> {%
    client.global.set("wallet", response.body.id);
%}

### Get wallet cookies
POST localhost:8081/auth/wallet/{{walletId}}
Content-Type: application/json

> {%
    client.global.set("walletId", response.body.id);
%}


### Get wallet
GET localhost:8081/api/wallets/current

### Create invite
#POST localhost:8081/api/wallets/invite
#Content-Type: application/json
#
#> {%
#    client.global.set("inviteCode", response.body.inviteCode);
#%}

### Join wallet
POST localhost:8081/api/wallets/join
#Content-Type: application/json
#
#{
#  "inviteCode": "{{inviteCode}}"
#}

### Create icon
POST localhost:8081/api/icons
Content-Type: application/json

{
  "contentType": "image/jpeg",
  "content": "/9j/4AAQSkZJRgABAQAAAAAAAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAiACIDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAgGBwkF/8QALhAAAgEDBAECBAYDAQAAAAAAAQIDBAUGAAcREiEIEwkxUXEUFSIkMkEWM0JS/8QAGQEAAwEBAQAAAAAAAAAAAAAABAUGBwMI/8QAMxEAAQIEBAIGCgMAAAAAAAAAAQIRAAMEIQUGEjFBURMiNHFywRQVMzVCYXOBobGy0fH/2gAMAwEAAhEDEQA/ANJCR/ZA++lij+I16YprjfqWnv8AfJ6LHPcNZdYrRI9IVRupePg+5Infhe4j68leSAQdRf1G+pLcvZzNLBnuFwy5NYLpeqTHnxtmiijqhMCEeORmDxTl/wCJ6MCPD+ADpGzn+3+WZRl2yke2t+eWvv13qZbfj93pZLXQQRSSVFU1M0yRtKiJBI4aRwh88ALwhw7CMrqqpHpE2WpaTpbQQCL9ZwbkgM3Dv2h5KVKWsoWvTY78+EagbGer3ZD1BypR4HfquGvl9009DdKQ0s9Ssf8AsMXJKyFR5ZVYuo8lQPOrp+2serFvf6Yze7S2KZZNjVHV1kX40VdnNFU0LIjtDV089MvtiSOTrwzAsvPglC6NdY+JRn2Q1KYFg1NjFwyGghdq29uhegrI0ZVE1MisG5kBLsrACMgjhh50LPyzUVE5qOUtCWdpgIYO25AB2/RDg2IqpKKZIUmYFg2sRv3cv8jRnsv00aVm2epy4XC20lfLmFugepgjmaL9qehZQSvIbg8c8aNKjgdWCxH7/qBOlEVRvNiGK57kFssua3OuoIrfZbhdrDJQVqQVDXiKWDo8ff8AQ8kScOkZI7nsvPnlVtsXojzD/ILjFt1upb77lV9jrIKG61EX4KzXKkrKZ46qnMjn3o68LMx9oIyD9Q7co6hvNydtsV3Ux4Y3lNE0sdPMlZR1EPUTUdUnmOaMkEBgT8iCGUkEEHUe2zp8wvMuUWfOchpMzx6GtNNS3Gqtq0ss1SjEVEYiUtG0Ub8Ksg6nusgUcAHVOrM1XgFF01OpJSmxSr5ndPAm7kEp2O/wsMKwyRiswyFuFsWIuPvy/Lvw40bsP8NTPsIzf873urMISWlpKiaz43U1IrfzllULIzBeBHHGJAe5DcMU5XjUJ3t252kptz9v7BtViGR4VfskuFDIt3tcjR0sVPL57Rp2IMqt/wCWUDofBBGm0yG25xjt8pZMGw6gutnqYxBd2kyOpp7hLCA3ECGQlGhBIbozhefkvPnVD3LZ71PXy+2u+ZDlq+/abp+bWqkgnj/AWOJWJEZm6K07lAY+gUoqEnkngDlh+aRidenEaqoCAEkaSvSC4LPLSVOxudfOxJZIbTMCn0dLMpAjWSbEJ259YtuGFn24XMNXSr7FLDDU0zVc0carJUOqhpmA4LkAcAk+fH10aWyf18bG008lPVwX2CeJiksSUayLG4PBUP2HYA8jngc/PRo71HiKr9CYlNYFnhj7zJJDj9fNDIySLQzurKeCGELEEH6g+edcDZeOOLZ/CBEioGx63uQo45ZoEZj9yzEk/wBkk/3o0ahM2e7U/UH8VRZZM7VM8PnEz/6P20nW7eY5dBvPmtkhym7x26Ky1HSjWulEC/tGPhA3UefPy+ejRqeyr2tXh8xFjinsh3+RiDSYjikkjO+MWlmYkkmijJJ+v8dGjRr0iIzA7x//2Q=="
}

> {%
    client.global.set("iconId", response.body);
%}

### Get icon
GET localhost:8081/api/icons/{{iconId}}

### Get icons list ids
GET localhost:8081/api/icons


### Create accounts group
POST localhost:8081/api/groups
Content-Type: application/json

{
  "type": "Accounts",
  "name": "main accounts",
  "idx": 1
}

> {%
    client.global.set("accountGroupId", response.body.id);
%}

### List accounts groups
GET localhost:8081/api/groups?groupType=Accounts

### Get accounts group
GET localhost:8081/api/groups/{{accountGroupId}}

### Create account
POST localhost:8081/api/accounts
Content-Type: application/json

{
  "group": "{{accountGroupId}}",
  "name": "monobank white card",
  "idx": 0,
  "icon": "",
  "tags": ["mono", "uah"]
}

> {%
    client.global.set("accountId", response.body.id);
%}

### Get accounts
GET localhost:8081/api/accounts

> {%
    client.global.set("account0Id", response.body[0].id);
%}

### Get grouped accounts
GET localhost:8081/api/accounts/grouped

### Get account
GET localhost:8081/api/accounts/{{accountId}}

### Create categories group
POST localhost:8081/api/groups
Content-Type: application/json

{
  "type": "Categories",
  "name": "Food",
  "idx": 1
}

> {%
    client.global.set("categoriesGroupId", response.body.id);
%}

### Create category
POST localhost:8081/api/categories
Content-Type: application/json

{
  "group": "{{categoriesGroupId}}",
  "name": "Cafes 2",
  "icon": "test",
  "tags": ["tag1"],
  "idx": 0
}

> {%
    client.global.set("categoryId", response.body.id);
%}

### Get categories
GET localhost:8081/api/categories

> {%
    client.global.set("category0Id", response.body[0].id);
%}

### Get grouped categories
GET localhost:8081/api/categories/grouped

### Get category
GET localhost:8081/api/categories/{{categoryId}}

### Create "Main" assets group
POST localhost:8081/api/groups
Content-Type: application/json

{
  "type": "Assets",
  "name": "Default assets group",
  "idx": 1
}

> {%
    client.global.set("assetsGroupId", response.body.id);
%}

### Create asset
POST localhost:8081/api/assets
Content-Type: application/json

{
  "group": "{{assetsGroupId}}",
  "type": "Fiat",
  "ticker": "USD",
  "name": "US Dollar",
  "icon": "",
  "tags": ["tag1"],
  "idx": 1,
  "startDate": null,
  "endDate": null,
  "denominatedIn": null,
  "denomination": null
}

> {%
    client.global.set("fiatAssetId", response.body.id);
%}

### Create bond asset
POST localhost:8081/api/assets
Content-Type: application/json

{
  "group": "{{assetsGroupId}}",
  "type": "Bond",
  "ticker": "UA10988712",
  "name": "ОВДП",
  "icon": "",
  "tags": ["tag1"],
  "idx": 2,
  "startDate": "2023-01-15T14:10:20Z",
  "endDate": "2024-01-15T14:10:20Z",
  "denominatedIn": "{{fiatAssetId}}",
  "denomination": 1000
}

> {%
    client.global.set("bondAssetId", response.body.id);
%}

### Get assets
GET localhost:8081/api/assets

> {%
    client.global.set("fromAssetId", response.body[0].id);
    client.global.set("toAssetId", response.body[1].id);
%}

### Get asset
GET localhost:8081/api/assets/{{fiatAssetId}}

### Create exchange rate
POST localhost:8081/api/exchange-rates
Content-Type: application/json

{
  "from": "{{fromAssetId}}",
  "to": "{{toAssetId}}",
  "rate": 1001,
  "datetime": "2023-02-15T14:10:20Z"
}

> {%
    client.global.set("exchangeRateId", response.body.id);
%}

### Get exchange rate
GET localhost:8081/api/exchange-rates/{{exchangeRateId}}

### Get exchange rates for assets
GET localhost:8081/api/exchange-rates?from={{fromAssetId}}&to={{toAssetId}}

### Create record income
POST localhost:8081/api/records
Content-Type: application/json

{
  "type": "Income",
  "to": {
    "account": "{{account0Id}}",
    "asset": "{{fromAssetId}}",
    "amount": 10000
  },
  "category": "{{category0Id}}",
  "description": "Some Income",
  "datetime": "2023-06-02T12:10:20Z",
  "tags": ["tag1"]
}

> {%
    client.global.set("recordId", response.body.id);
%}

### Create record spending
POST localhost:8081/api/records
Content-Type: application/json

{
  "type": "Spending",
  "from": {
    "account": "{{account0Id}}",
    "asset": "{{fromAssetId}}",
    "amount": 99.99
  },
  "category": "{{category0Id}}",
  "description": "Bananas",
  "datetime": "2023-06-02T14:10:20Z",
  "tags": ["tag1"]
}

> {%
    client.global.set("recordId", response.body.id);
%}

### Create record transfer (exchange)
POST localhost:8081/api/records
Content-Type: application/json

{
  "type": "Transfer",
  "from": {
    "account": "{{account0Id}}",
    "asset": "{{fromAssetId}}",
    "amount": 1000
  },
  "to": {
    "account": "{{account0Id}}",
    "asset": "{{toAssetId}}",
    "amount": 1
  },
  "category": "{{category0Id}}",
  "description": "Exchange asset",
  "datetime": "2023-06-02T15:10:20Z",
  "tags": ["tag1"]
}

> {%
    client.global.set("recordId", response.body.id);
%}


### Get record
GET localhost:8081/api/records/{{recordId}}

### Get records
GET localhost:8081/api/records?account={{account0Id}}
